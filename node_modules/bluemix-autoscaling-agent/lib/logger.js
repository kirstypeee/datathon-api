'use strict';
module.exports = function() {
  var logger = {};
  var DEBUG = 1;
  var INFO = 2;
  var ERROR = 3;
  var defaultLogLevel = INFO;
  // console.log('[Auto-Scaling Agent] AUTOSCALING_AGENT_LOG_LEVEL:' + process.env.AUTOSCALING_AGENT_LOG_LEVEL + ', is number:' + !isNaN(process.env.AUTOSCALING_AGENT_LOG_LEVEL))

  var prefix = '[Auto-Scaling Agent] ';
  logger.info = function(msg) {
    if (!msg) {
      return;
    }
    if (process.env.AUTOSCALING_AGENT_LOG_LEVEL && !isNaN(process.env.AUTOSCALING_AGENT_LOG_LEVEL)) {
      defaultLogLevel = process.env.AUTOSCALING_AGENT_LOG_LEVEL
    }
    if (INFO >= defaultLogLevel) {
      console.log(prefix + msg);
    }
  }
  logger.debug = function(msg) {
    if (!msg) {
      return;
    }
    if (process.env.AUTOSCALING_AGENT_LOG_LEVEL && !isNaN(process.env.AUTOSCALING_AGENT_LOG_LEVEL)) {
      defaultLogLevel = process.env.AUTOSCALING_AGENT_LOG_LEVEL
    }
    if (DEBUG >= defaultLogLevel) {
      console.log(prefix + msg);
    }
  }
  logger.error = function(msg) {
    if (!msg) {
      return;
    }
    if (process.env.AUTOSCALING_AGENT_LOG_LEVEL && !isNaN(process.env.AUTOSCALING_AGENT_LOG_LEVEL)) {
      defaultLogLevel = process.env.AUTOSCALING_AGENT_LOG_LEVEL
    }
    if (ERROR >= defaultLogLevel) {
      console.error(prefix + msg);
    }
  }
  return logger;
}